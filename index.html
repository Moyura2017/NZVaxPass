<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="styles.css">
    <title>NZ Vaccine Pass</title>
</head>

<body>
    <h1 id="title">NZ Vaccine Pass Decoder</h1>
    <label id="lblqrcode" for="txtqrcode">QR Code &nbsp;</label>
    <input id="txtqrcode" name="txtqrcode" type="text" value="NZCP:/1/..." autocomplete="off"></input> <br><br>
    <button id="btnclear">Clear</button>
    <button id="btndecode">Decode</button>

    <script type="module">
        import { decode } from './js/main.js';

        window.addEventListener('click', e => {
            switch (e.target.id) {
                case 'btndecode':
                    btnDecodeClick();
                    break;
                case 'btnclear':
                    btnClearClick();
                    break;
            }
        })

        function btnDecodeClick() {
            var qc = document.getElementById("txtqrcode").value;
            console.log('QR Code: ' + qc);
            decode(qc);
            console.log('Path: '+import.meta.url);
            alert('Working on it!')
        }

        function btnClearClick() {
            document.getElementById("txtqrcode").value = "";
            console.clear();
        }
        
    </script>

</body>

</html>