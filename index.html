<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="styles.css">
    <title>NZ Vaccine Pass</title>
</head>

<body>
    <h1 id="title">NZ Vaccine Pass Decoder</h1>
    <label id="lblqrcode" for="txtqrcode">QR Code &nbsp;</label>
    <input 
        type="text"
        id="txtqrcode" 
        name="txtqrcode" 
        autocomplete="off"
        value="NZCP:/1/2KCEVIQEIVVWK6JNGEASNICZAEP2KALYDZSGSZB2O5SWEOTOPJRXALTDN53GSZBRHEXGQZLBNR2GQLTOPICRUYMBTIFAIGTUKBAAUYTWMOSGQQDDN5XHIZLYOSBHQJTIOR2HA4Z2F4XXO53XFZ3TGLTPOJTS6MRQGE4C6Y3SMVSGK3TUNFQWY4ZPOYYXQKTIOR2HA4Z2F4XW46TDOAXGG33WNFSDCOJONBSWC3DUNAXG46RPMNXW45DFPB2HGL3WGFTXMZLSONUW63TFGEXDALRQMR2HS4DFQJ2FMZLSNFTGSYLCNRSUG4TFMRSW45DJMFWG6UDVMJWGSY2DN53GSZCQMFZXG4LDOJSWIZLOORUWC3CTOVRGUZLDOSRWSZ3JOZSW4TTBNVSWISTBMNVWUZTBNVUWY6KOMFWWKZ2TOBQXE4TPO5RWI33CNIYTSNRQFUYDILJRGYDVAYFE6VGU4MCDGK7DHLLYWHVPUS2YIDJOA6Y524TD3AZRM263WTY2BE4DPKIF27WKF3UDNNVSVWRDYIYVJ65IRJJJ6Z25M2DO4YZLBHWFQGVQR5ZLIWEQJOZTS3IQ7JTNCFDX"
    >
    <br><br>
    <button id="btnclear">Clear</button>
    <button id="btndecode">Decode</button>
    <p id="result"></p>

    <script type="module">
        import { decode } from './js/main.js';

        window.addEventListener('click', e => {
            switch (e.target.id) {
                case 'btndecode':
                    btnDecodeClick();
                    break;
                case 'btnclear':
                    btnClearClick();
                    break;
            }
        })

        function btnDecodeClick() {
            console.clear();
            var qc = document.getElementById("txtqrcode").value;
            var result = document.getElementById("result");
            try {
                
                result.innerHTML = decode(qc);
            }catch(err) {
                result.innerHTML=err;
            };
        }

        function btnClearClick() {
            document.getElementById("txtqrcode").value = "";
            console.clear();
        }
    </script>

</body>

</html>